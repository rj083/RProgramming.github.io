<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=Generator content="Microsoft Word 15 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Century;
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:Mangal;
	panose-1:2 4 5 3 5 2 3 3 2 2;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Century",serif;}
h1
	{mso-style-link:"Heading 1 Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:24.0pt;
	font-family:"Times New Roman",serif;
	font-weight:bold;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:18.0pt;
	font-family:"Times New Roman",serif;
	font-weight:bold;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:13.5pt;
	font-family:"Times New Roman",serif;
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:#954F72;
	text-decoration:underline;}
p
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:"Times New Roman",serif;}
pre
	{mso-style-link:"HTML Preformatted Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Courier New";}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Times New Roman",serif;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Times New Roman",serif;
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Times New Roman",serif;
	font-weight:bold;}
p.Tutorial, li.Tutorial, div.Tutorial
	{mso-style-name:Tutorial;
	mso-style-link:"Tutorial Char";
	margin:0cm;
	margin-bottom:.0001pt;
	line-height:150%;
	font-size:11.0pt;
	font-family:"Verdana",sans-serif;}
span.TutorialChar
	{mso-style-name:"Tutorial Char";
	mso-style-link:Tutorial;
	font-family:"Verdana",sans-serif;}
span.HTMLPreformattedChar
	{mso-style-name:"HTML Preformatted Char";
	mso-style-link:"HTML Preformatted";
	font-family:"Courier New";}
.MsoChpDefault
	{font-family:"Century",serif;}
@page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 72.0pt 72.0pt 72.0pt;}
div.WordSection1
	{page:WordSection1;}
-->
</style>

</head>

<body lang=EN-GB link=blue vlink="#954F72">

<div class=WordSection1>

<p class=MsoNormal style='margin-top:0cm;margin-right:2.4pt;margin-bottom:7.2pt;
margin-left:2.4pt;text-align:justify;line-height:200%'><span style='font-size:
10.0pt;line-height:200%;font-family:"Verdana",sans-serif;color:black'>Many
websites provide data for consumption by its users. For example the World
Health Organization(WHO) provides reports on health and medical information in
the form of CSV, txt and XML files. Using R programs, we can programmatically
extract specific data from such websites. Some packages in R which are used to
scrap data form the web are &#8722; &quot;RCurl&quot;,XML&quot;, and
&quot;stringr&quot;. They are used to connect to the URL’s, identify required
links for the files and download them to the local environment.</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:2.4pt;margin-bottom:7.2pt;
margin-left:2.4pt;text-align:justify;line-height:200%'><span style='font-size:
10.0pt;line-height:200%;font-family:"Verdana",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:2.4pt;margin-right:2.4pt;margin-bottom:
2.4pt;margin-left:0cm;text-align:justify;line-height:200%'><span
style='font-size:14.0pt;line-height:200%;font-family:"Verdana",sans-serif;
color:#203864;letter-spacing:-.75pt'>Install R Packages</span></p>

<p class=MsoNormal style='margin-top:2.4pt;margin-right:2.4pt;margin-bottom:
2.4pt;margin-left:0cm;text-align:justify;line-height:200%'><span
style='font-size:7.0pt;line-height:200%;font-family:"Verdana",sans-serif;
color:#203864;letter-spacing:-.75pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:2.4pt;margin-bottom:7.2pt;
margin-left:2.4pt;text-align:justify;line-height:200%'><span style='font-size:
10.0pt;line-height:200%;font-family:"Verdana",sans-serif;color:black'>The
following packages are required for processing the URL’s and links to the
files. If they are not available in your R Environment, you can install them
using following commands.</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:2.4pt;margin-bottom:7.2pt;
margin-left:2.4pt;text-align:justify;line-height:200%'><span style='font-size:
3.0pt;line-height:200%;font-family:"Verdana",sans-serif;color:black'>&nbsp;</span></p>

<div style='border:solid #D6D6D6 1.0pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;
background:#F1F1F1'>

<p class=MsoNormal style='text-align:justify;line-height:200%;background:#F1F1F1;
border:none;padding:0cm'><span style='font-size:7.0pt;line-height:200%;
font-family:Consolas;color:#313131'>install.packages(&quot;RCurl&quot;)</span></p>

<p class=MsoNormal style='text-align:justify;line-height:200%;background:#F1F1F1;
border:none;padding:0cm'><span style='font-size:7.0pt;line-height:200%;
font-family:Consolas;color:#313131'>install.packages(&quot;XML&quot;)</span></p>

<p class=MsoNormal style='text-align:justify;line-height:200%;background:#F1F1F1;
border:none;padding:0cm'><span style='font-size:7.0pt;line-height:200%;
font-family:Consolas;color:#313131'>install.packages(&quot;stringr&quot;)</span></p>

<p class=MsoNormal style='text-align:justify;line-height:200%;background:#F1F1F1;
border:none;padding:0cm'><span style='font-size:7.0pt;line-height:200%;
font-family:Consolas;color:#313131'>install.packages(&quot;plyr&quot;)</span></p>

</div>

<div style='border:none;border-top:solid windowtext 1.0pt;padding:1.0pt 0cm 0cm 0cm;
margin-left:0cm;margin-right:2.4pt'>

<p class=MsoNormal style='margin-top:2.4pt;margin-right:0cm;margin-bottom:2.4pt;
margin-left:0cm;text-align:justify;line-height:200%;border:none;padding:0cm'><span
style='font-size:10.0pt;line-height:200%;font-family:"Verdana",sans-serif;
color:#121214;letter-spacing:-.75pt'>&nbsp;</span></p>

</div>

<p class=MsoNormal style='margin-top:2.4pt;margin-right:2.4pt;margin-bottom:
2.4pt;margin-left:0cm;text-align:justify;line-height:200%'><span
style='font-size:14.0pt;line-height:200%;font-family:"Verdana",sans-serif;
color:#203864;letter-spacing:-.75pt'>Input Data</span></p>

<p class=MsoNormal style='margin-top:2.4pt;margin-right:2.4pt;margin-bottom:
2.4pt;margin-left:0cm;text-align:justify;line-height:200%'><span
style='font-size:5.0pt;line-height:200%;font-family:"Verdana",sans-serif;
color:#203864;letter-spacing:-.75pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:2.4pt;margin-bottom:7.2pt;
margin-left:2.4pt;text-align:justify;line-height:200%'><span style='font-size:
10.0pt;line-height:200%;font-family:"Verdana",sans-serif;color:black'>We will
visit the URL&nbsp;</span><u><span style='font-size:10.0pt;line-height:200%;
font-family:"Verdana",sans-serif;color:#313131'>weather data</span></u><span
style='font-size:10.0pt;line-height:200%;font-family:"Verdana",sans-serif;
color:black'>&nbsp;and download the CSV files using R for the year 2015.</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:2.4pt;margin-bottom:7.2pt;
margin-left:2.4pt;text-align:justify;line-height:200%'><span style='font-size:
3.0pt;line-height:200%;font-family:"Verdana",sans-serif;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:2.4pt;margin-right:2.4pt;margin-bottom:
2.4pt;margin-left:0cm;text-align:justify;line-height:200%'><span
style='font-size:12.0pt;line-height:200%;font-family:"Verdana",sans-serif;
color:#121214;letter-spacing:-.75pt'>Example</span></p>

<p class=MsoNormal style='margin-top:2.4pt;margin-right:2.4pt;margin-bottom:
2.4pt;margin-left:0cm;text-align:justify;line-height:200%'><span
style='font-size:5.0pt;line-height:200%;font-family:"Verdana",sans-serif;
color:#121214;letter-spacing:-.75pt'>&nbsp;</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:2.4pt;margin-bottom:7.2pt;
margin-left:2.4pt;text-align:justify;line-height:200%'><span style='font-size:
10.0pt;line-height:200%;font-family:"Verdana",sans-serif;color:black'>We will
use the function&nbsp;<b>getHTMLLinks()</b>&nbsp;to gather the URLs of the
files. Then we will use the function&nbsp;<b>download.file()</b>&nbsp;to save
the files to the local system. As we will be applying the same code again and
again for multiple files, we will create a function to be called multiple
times. The filenames are passed as parameters in form of a R list object to
this function.</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:2.4pt;margin-bottom:7.2pt;
margin-left:2.4pt;text-align:justify;line-height:200%'><span style='font-size:
5.0pt;line-height:200%;font-family:"Verdana",sans-serif;color:black'>&nbsp;</span></p>

<div style='border:solid #D6D6D6 1.0pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;
background:#EEEEEE'>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
7.5pt;margin-left:0cm;line-height:200%;background:#EEEEEE;border:none;
padding:0cm'><span style='font-size:7.0pt;line-height:200%;font-family:Consolas;
color:#313131'># Read the URL.</span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
7.5pt;margin-left:0cm;line-height:200%;background:#EEEEEE;border:none;
padding:0cm'><span style='font-size:7.0pt;line-height:200%;font-family:Consolas;
color:#313131'>url &lt;- &quot;http://www.geos.ed.ac.uk/~weather/jcmb_ws/&quot;</span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
7.5pt;margin-left:0cm;line-height:200%;background:#EEEEEE;border:none;
padding:0cm'><span style='font-size:7.0pt;line-height:200%;font-family:Consolas;
color:#313131'># Gather the html links present in the webpage.</span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
7.5pt;margin-left:0cm;line-height:200%;background:#EEEEEE;border:none;
padding:0cm'><span style='font-size:7.0pt;line-height:200%;font-family:Consolas;
color:#313131'>links &lt;- getHTMLLinks(url)</span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
7.5pt;margin-left:0cm;line-height:200%;background:#EEEEEE;border:none;
padding:0cm'><span style='font-size:7.0pt;line-height:200%;font-family:Consolas;
color:#313131'># Identify only the links which point to the JCMB 2015 files. </span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
7.5pt;margin-left:0cm;line-height:200%;background:#EEEEEE;border:none;
padding:0cm'><span style='font-size:7.0pt;line-height:200%;font-family:Consolas;
color:#313131'>filenames &lt;- links[str_detect(links, &quot;JCMB_2015&quot;)]</span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
7.5pt;margin-left:0cm;line-height:200%;background:#EEEEEE;border:none;
padding:0cm'><span style='font-size:7.0pt;line-height:200%;font-family:Consolas;
color:#313131'># Store the file names as a list.</span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
7.5pt;margin-left:0cm;line-height:200%;background:#EEEEEE;border:none;
padding:0cm'><span style='font-size:7.0pt;line-height:200%;font-family:Consolas;
color:#313131'>filenames_list &lt;- as.list(filenames)</span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
7.5pt;margin-left:0cm;line-height:200%;background:#EEEEEE;border:none;
padding:0cm'><span style='font-size:7.0pt;line-height:200%;font-family:Consolas;
color:#313131'># Create a function to download the files by passing the URL and
filename list.</span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
7.5pt;margin-left:0cm;line-height:200%;background:#EEEEEE;border:none;
padding:0cm'><span style='font-size:7.0pt;line-height:200%;font-family:Consolas;
color:#313131'>downloadcsv &lt;- function (mainurl,filename) {</span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
7.5pt;margin-left:0cm;line-height:200%;background:#EEEEEE;border:none;
padding:0cm'><span style='font-size:7.0pt;line-height:200%;font-family:Consolas;
color:#313131'>   filedetails &lt;- str_c(mainurl,filename)</span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
7.5pt;margin-left:0cm;line-height:200%;background:#EEEEEE;border:none;
padding:0cm'><span style='font-size:7.0pt;line-height:200%;font-family:Consolas;
color:#313131'>   download.file(filedetails,filename)</span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
7.5pt;margin-left:0cm;line-height:200%;background:#EEEEEE;border:none;
padding:0cm'><span style='font-size:7.0pt;line-height:200%;font-family:Consolas;
color:#313131'>}</span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
7.5pt;margin-left:0cm;line-height:200%;background:#EEEEEE;border:none;
padding:0cm'><span style='font-size:7.0pt;line-height:200%;font-family:Consolas;
color:#313131'># Now apply the l_ply function and save the files into the
current R working directory.</span></p>

<p class=MsoNormal style='margin-top:11.25pt;margin-right:0cm;margin-bottom:
7.5pt;margin-left:0cm;line-height:200%;background:#EEEEEE;border:none;
padding:0cm'><span style='font-size:7.0pt;line-height:200%;font-family:Consolas;
color:#313131'>l_ply(filenames,downloadcsv,mainurl =
&quot;http://www.geos.ed.ac.uk/~weather/jcmb_ws/&quot;)</span></p>

</div>

<div style='border:none;border-top:solid windowtext 1.0pt;padding:1.0pt 0cm 0cm 0cm;
margin-left:0cm;margin-right:2.4pt'>

<p class=MsoNormal style='margin-top:2.4pt;margin-right:0cm;margin-bottom:2.4pt;
margin-left:0cm;text-align:justify;line-height:200%;border:none;padding:0cm'><span
style='line-height:200%;font-family:"Verdana",sans-serif;color:#121214;
letter-spacing:-.75pt'>&nbsp;</span></p>

</div>

<p class=MsoNormal style='margin-top:2.4pt;margin-right:2.4pt;margin-bottom:
2.4pt;margin-left:0cm;text-align:justify;line-height:200%'><span
style='font-size:14.0pt;line-height:200%;font-family:"Verdana",sans-serif;
color:#203864;letter-spacing:-.75pt'>Verify the File Download</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:2.4pt;margin-bottom:7.2pt;
margin-left:2.4pt;text-align:justify;line-height:200%'><span style='font-size:
10.0pt;line-height:200%;font-family:"Verdana",sans-serif;color:black'>After
running the above code, you can locate the following files in the current R
working directory.</span></p>

<p class=MsoNormal style='margin-top:0cm;margin-right:2.4pt;margin-bottom:7.2pt;
margin-left:2.4pt;text-align:justify;line-height:200%'><span style='font-size:
6.0pt;line-height:200%;font-family:"Verdana",sans-serif;color:black'>&nbsp;</span></p>

<div style='border:solid #D6D6D6 1.0pt;padding:4.0pt 4.0pt 4.0pt 4.0pt;
background:#F1F1F1'>

<p class=MsoNormal style='text-align:justify;line-height:200%;background:#F1F1F1;
border:none;padding:0cm'><span style='font-size:7.0pt;line-height:200%;
font-family:Consolas;color:#313131'>&quot;JCMB_2015.csv&quot;
&quot;JCMB_2015_Apr.csv&quot; &quot;JCMB_2015_Feb.csv&quot;
&quot;JCMB_2015_Jan.csv&quot;</span></p>

<p class=MsoNormal style='text-align:justify;line-height:200%;background:#F1F1F1;
border:none;padding:0cm'><span style='font-size:7.0pt;line-height:200%;
font-family:Consolas;color:#313131'>   &quot;JCMB_2015_Mar.csv&quot;</span></p>

</div>

<p class=MsoNormal style='text-align:justify;line-height:200%'><span
style='font-size:9.0pt;line-height:200%'>&nbsp;</span></p>

</div>

</body>

</html>
